(()=>{var e={7586:e=>{"use strict";e.exports={PRICING_BREAKPOINT:20,PRICING_MAX_BUCKET:50,getCpmDollarBucket:function(e){return Math.min(Math.floor(e),50)}}},5085:e=>{"use strict";e.exports={get:function(){var e="desktop",t=window.top&&window.top.screen?window.top.screen:{},i=window.navigator||{};return("ontouchstart"in window||0<i.MaxTouchPoints||0<i.msMaxTouchPoints)&&(e=1024<=t.width&&768<=t.height||1024<=t.height&&768<=t.width?"tablet":"mobile"),e}}},1762:(e,t,i)=>{"use strict";var n=i(2004);function o(e,t){switch(e.type){case"simple":return t[e.key]}}function r(){var e;try{window.top.document.referrer&&(e=window.top.document.referrer)}catch(t){e=document.referrer}return e?n(e):void 0}e.exports={evalTemplate:o,makePageTargeting:function(e,t,i,n){var r=i.beacons&&i.beacons.targetingParams&&i.beacons.targetingParams.exclude||{},a={};return Object.keys(e||{}).forEach((function(i){var s=o(e[i],t);"number"==typeof s&&(s+=""),null==s||""===s||Array.isArray(s)&&0===s.length||(n&&n.setTargeting(i,s),!r[i]&&(a[i]=s))})),a},vastCustomParams:function(e,t,i){var n=["ag","channel","cs","direct","et","feats","gd","in","lang","loggedin","pagetype","path","pod","pt","referrer","terms"];for(var o in t||(t={}),t)if(-1<n.indexOf(o)){var r=t[o];Array.isArray(r)&&(r=r.join(",")),e[o]=r}return i?encodeURIComponent(Object.keys(e).map((function(t){return[t,e[t]].join("=")})).join("&")):e},makePageModel:function(e,t,i,n){var o={};window.phxTrackedFeatures&&(o={trackedFeatures:Object.keys(window.phxTrackedFeatures).map((function(e){return e+":"+(window.phxTrackedFeatures[e]?"1":"0")})).join("|")});var a={};if(i){var s=window.GdprStatus;a={donottrack:!0,gdprIsApplicable:!0,gdprIsConsentGivenPromise:s.waitForConsentValue().then((function(){return s.isConsentGivenForPurposes(s.PURPOSE_IDS.advertising)})),kuid:void 0,optout:!0}}return Object.assign({},e,o,{referrer:r(),loggedIn:window.phxIsLoggedIn()?"1":"0"},a,n||{},t)}}},2784:e=>{"use strict";e.exports={getDependencyClass:function(e){if(!e)throw new Error("dependencyName required");return window.customElements.whenDefined(e).then((function(){return window.customElements.get(e)}))},getFirstDependencyElement:function(e,t){if(!e)throw new Error("dependencyName required");return t||(t=document),window.customElements.whenDefined(e).then((function(){var i=t.querySelector(e);if(!i)throw new Error(e+" element cannot be found");return i}))}}},2579:(e,t,i)=>{"use strict";var n=i(1762),o=i(7586),r=n.evalTemplate;function a(e){var t=[];for(var i in e)t.push(i+"="+e[i]);return{tag:"https://pubads.g.doubleclick.net/gampad/ads?"+t.join("&")}}function s(e){var t=e.adId,i=e.slotModel,a=e.dimensions,s=e.maxDuration,d=e.gdprApplicable,l=e.encode,u=e.directOnly,c=e.nonlinear;if(!window.phxPageTarget)return Promise.resolve(!1);var p=window.phxPageTarget.config.global.config,h=window.phxPageTarget.config.global.baseModel;return a||(a={h:529,w:940}),new Promise((function(e){window.phxAdAuctionQueue.push((function(){var f=n.makePageModel(h,this.keyValues,d),v=p.adUnitPathTemplates.map((function(e){return r(e,f)})).filter((function(e){return!!e})).map((function(e){return Array.isArray(e)?e.join("/"):encodeURIComponent(e)})),y=["",p.networkId].concat(v).join("/"),g=window.location.protocol+"//"+h.hostname+h.path,m=n.makePageTargeting(p.customTargetingPageTemplates,f,p),w={};if(i){var b=i.zone+"_"+i.index;w={adindex:i.index+"",adzone:i.zone,adzoneindex:b,siteadzoneindex:h.hostname+"_"+b}}else c&&(w={adindex:0,adzone:"nonlinear",adzoneindex:"nonlinear_0",siteadzoneindex:h.hostname+"_nonlinear_0"});if(w.direct=u?1:0,window.pbjs&&t){var _=window.pbjs.getAdserverTargetingForAdUnitCode(t);_.hb_deal&&(w.deal="1");var I=0;_.hb_pb&&(I=o.getCpmDollarBucket(parseFloat(_.hb_pb))),w.hb_pbd=I.toString()}var A={description_url:g,sz:a.w+"x"+a.h,impl:"s",gdfp_req:1,env:"vp",output:"vast",unviewed_position_start:1,url:g};if(c&&(A.vad_type="nonlinear"),A.correlator=window.google_global_correlator||Math.floor(Math.random()*Math.pow(10,16)),A.iu=y,A.cust_params=n.vastCustomParams(w,m,l),s&&(A.max_ad_duration=1e3*s),i&&["preroll","midroll","postroll"].includes(i.zone)&&(A.vpos=i.zone),d){var P=window.GdprStatus;P.isConsentGivenForPurposes(P.PURPOSE_IDS.advertising).then((function(t){t||(A.npa=1),e(A)}))}else e(A)}))}))}e.exports={generateTargeting:function(e){var t=e.adId,i=e.slotModel,n=e.dimensions,o=e.maxDuration,r=e.gdprApplicable;return s({adId:t,slotModel:i,dimensions:n,directOnly:e.directOnly,maxDuration:o,gdprApplicable:r,encode:!0}).then((function(e){return e?a(e):e}))},generateTargetingParams:s,generateNonlinearTargeting:function(e){return s({dimensions:{h:529,w:940},directOnly:!0,encode:!0,gdprApplicable:e.gdprApplicable,nonlinear:!0,skipPrebid:!0}).then((function(e){return!!e&&a(e)}))}}},2004:(e,t)=>{var i;void 0===(i=function(){"use strict";return function(e){return e.replace(/^https?:\/\//,"").replace(/[:\/].*/,"").toLowerCase().replace(/^www\./,"").replace(/^m\./,"").replace(/\.blogspot(\.com?)?\.[a-z]{2,3}$/,".blogspot.com").replace(/^.*\.(gamepedia|wikia)(\.com?)?\.[a-z]{2,3}$/,"$1.com").split(".").slice(-3).join(".")}}.apply(t,[]))||(e.exports=i)}},t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={exports:{}};return e[n](o,o.exports,i),o.exports}(()=>{"use strict";function e(e,t){var i,n=this,o=null,r=+t;this.delay=t,this.remaining=function(){return Math.max(r+i-+new Date,0)},this.cancel=function(){clearTimeout(o),n.cancelled=!0},this.pause=function(){clearTimeout(o),r-=+new Date-i,n.paused=!0},this.resume=function(){i=+new Date,clearTimeout(o),o=setTimeout(e,r),n.paused=!1},this.resume()}function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function o(e){for(var t,i=1;i<arguments.length;i++)t=null==arguments[i]?{}:arguments[i],i%2?n(Object(t),!0).forEach((function(i){r(e,i,t[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):n(Object(t)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}));return e}function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=Array(t);i<t;i++)n[i]=e[i];return n}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var i,n=0;n<t.length;n++)(i=t[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}function u(e,t,i){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(i):o.value}})(e,t,i||e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,i){return!i||"object"!==t(i)&&"function"!=typeof i?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):i}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f,v,y=i(2579),g=y.generateTargeting,m=y.generateTargetingParams,w=y.generateNonlinearTargeting,b=i(2784).getDependencyClass,_=i(5085);b("phoenix-page").then((function(i){var n=function(n){function r(){return d(this,r),P.apply(this,arguments)}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(r,n);var s,y,b,I,A,P=(I=r,A=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(I);if(A){var i=h(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return p(this,e)});return s=r,b=[{key:"observedAttributes",get:function(){return["block-player-loading"]}}],(y=[{key:"isFloating",get:function(){return this._isFloating},set:function(e){this.phoenixPage||(this.phoenixPage=this.closest("phoenix-page")),this.parentContainer||(this.parentContainer=this.closest("figure")),this._isFloating=e,this.phoenixPage.classList.toggle("is-fnp-floating",e),this.parentContainer.classList.toggle("is-fnp-floating",e)}},{key:"isUserInactive",get:function(){return this._isUserInactive},set:function(t){var i=this;t&&!this._isUserInactive&&!this.dismissTimer&&this.isFloating&&0<this.dismissAfterTimeout&&this.player&&(this._isUserInactive=t,this.dismissTimer=new e((function(){i.player.setFloating(!1),i.player.pause(),i.emitFnPSClosedStatus()}),1e3*this.dismissAfterTimeout)),!t&&this.dismissTimer&&this.dismissTimer.cancel(),this._isUserInactive=t}},{key:"attributeChangedCallback",value:function(e){if("block-player-loading"===e&&!this.hasAttribute(e))try{this._instantiatePlayer()}catch(e){this._reportErrorMessage("Error instantiating player: "+e.toString())}}},{key:"connectedCallback",value:function(){if(u(h(r.prototype),"connectedCallback",this).call(this),!window.GdprStatus)throw new Error("window.GdprStatus is required");this.observeFirstIntersection()}},{key:"onFirstIntersection",value:function(){var e=this;this.hasAttribute("delay-load")?i.util.whenPageLoaded().then((function(){e._init()})):this._init()}},{key:"emitFnPSClosedStatus",value:function(){this.emitEvent("fnp:closed",{bubbles:!0,detail:{}})}},{key:"additionalInitPromise",value:function(){return Promise.resolve(!0)}},{key:"_init",value:function(){var e=this;this.libraryId=this.getAttr("library-id",{required:!0}),this.videoId=this.getAttr("video-id",{required:!0}),this.auctionCount=0,this.gdprApplicable=!1,this.adId=null,this.playerStates={paused:!1,playing:!1,completed:!1,viewable:1},this.siteBasePath=this.getAttr("site-base-path")||"",this.showFooter=this.hasAttribute("show-footer"),this.autoplayThreshold=this.getAttribute("autoplay-threshold")||0,this.autoplayThresholdMet=!+this.autoplayThreshold||0>=this.autoplayThreshold,this.dismissAfterTimeout=parseInt(this.getAttr("dismiss-after-timeout")||0);var t=this.getAttr("analytics-config");if(t)try{this.analyticsConfig=JSON.parse(t)}catch(e){console.warn("Unable to parse config attribute",e)}var n=this.getAttr("ad-config");if(n)try{this.adConfig=JSON.parse(n)}catch(e){console.warn("Unable to parse ad-config attribute",e)}if(this.thirdPartyIds={},this.getAttr("third-party-ids"))try{this.thirdPartyIds=JSON.parse(this.getAttr("third-party-ids"))}catch(e){console.warn("Unable to parse third-party-ids attribute",e)}var o=this.additionalInitPromise();this.getAttribute("height")&&this.getAttribute("width")&&(this.dimensions={h:this.getAttribute("height"),w:this.getAttribute("width")});var r=new Set;if(this.directOnly=this.hasAttribute("direct-only"),this.directOnly&&r.add("direct_only"),this.getAttr("ad-suppressed-reasons"))try{JSON.parse(this.getAttr("ad-suppressed-reasons")).forEach((function(e){return r.add(e)}))}catch(e){console.warn("Unable to parse ad-suppressed-reasons attribute",e)}this.setAttribute("block-player-loading",!0);var s=fetch("https://content.jwplatform.com/v2/media/".concat(this.videoId)).then((function(e){return e.json()})).then((function(t){e.playlist=t})).catch((function(t){throw e._reportErrorMessage("Cannot load playlist: "+t),t})),d=this._loadPlayerLibrary().catch((function(t){throw e._reportErrorMessage("Cannot load player library: "+JSON.stringify(t)),t})),l=window.GdprStatus.isDemonetizedSafe();Promise.all([s,d,l,i.util.userHasPremium(),window.GdprStatus.isApplicable(),o]).then((function(t){e.demonetized=!!t[2]||t[3],t[2]&&r.add("gdpr"),t[3]&&r.add("premium"),e.analyticsModel={videoMonetizationState:r.size?a(r.values()).join("|"):"OK"},e.gdprApplicable=t[4],e.autoplayThresholdMet&&e.removeAttribute("block-player-loading"),e.runAuction().then((function(){e.removeAttribute("block-player-loading")}))}))}},{key:"_reportErrorMessage",value:function(e){window.ga&&window.ga("send","event","phoenixVideoError",e),console.error("phoenix-video error: "+e)}},{key:"_consentForAnalytics",value:function(){var e=window.phxConsentManagement.ccpaAccepted(),t=window.GdprStatus,i=new Promise((function(e,i){t.isApplicable().then((function(n){n?t.waitForConsentValue().then((function(){t.isConsentGivenForPurposes(["measurement"]).then(e,i)})):e(!0)}),i)}));return Promise.all([e,i]).then((function(e){return e[0]&&e[1]}))}},{key:"_loadScript",value:function(e,t){return new Promise((function(i,n){var o=document.createElement("script");o.id=e,o.src=t,o.onload=i,o.onerror=n,document.head.appendChild(o)}))}},{key:"_loadPlayerLibrary",value:function(){if(!f){if(window.jwplayer)return Promise.resolve();f=this._loadScript("phoenixvideo_jwp","https://content.jwplatform.com/libraries/"+this.libraryId+".js")}return f}},{key:"_loadComscoreLibrary",value:function(){return v=window.ns_?Promise.resolve():v||this._loadScript("phoenixvideo-comscoreanalytics-jwp","https://sb.scorecardresearch.com/c2/plugins/streamingtag_plugin_jwplayer.js")}},{key:"_initFooter",value:function(){var e=this,t=function(t){if(t){var i=t.querySelector(".m-video-player--mute"),n=t.querySelector(".m-video-player--unmute"),o=function(){var t=e.player.getMute();n.classList.toggle("is-active-button",t),i.classList.toggle("is-active-button",!t)};e.player.on("mute",o),o(),n.addEventListener("click",(function(){e.player.setMute(!1)})),i.addEventListener("click",(function(){e.player.setMute(!0)}))}},i=document.querySelector(".".concat(this.id,"-footer"));t(i),t(this),this.player.on("mute",(function(){window.googleAnalytics&&window.googleAnalytics.sendEvent("Video Mute/Unmute","click",e.player.getMute())})),i&&(this.staticFooterMeta=i.querySelector(".m-video-player--footer-meta")),this.floatFooterMeta=this.querySelector(".m-video-player--footer-meta")}},{key:"setupPlayer",value:function(){this.player.setup(this.playerConfig),this.player.setPlaylistItemCallback(this.onPlaylistItem.bind(this))}},{key:"_instantiatePlayer",value:function(){var e=this,t=document.createElement("div"),i=this.querySelector(".m-video-player--footer-float");i?this.insertBefore(t,i):this.appendChild(t),this.player=window.jwplayer(t),this.setupPlayer(),this.waitForElement(".jwplayer").then((function(t){e.playerElement=t;var i=e._jwplayerStates.bind(e);new MutationObserver(i).observe(t,{attributes:!0,attributeFilter:["class"]})})),this.showFooter&&this.id&&this._initFooter();var n=(window.location.hash||"").match(/t=(\d+)/);n&&(history.pushState&&history.pushState("",document.title,window.location.pathname+window.location.search),this.offset=+n[1],this.player.on("firstFrame",(function(){e.offset&&(e.player.seek(e.offset),e.offset=!1)})));var r={};this.player.on("adError",(function(t){var i="phoenix-video JWPlayer ad error: "+JSON.stringify(t);console.warn(i),e.sendLiftIgniterEvent({e:"video_ad_error",errorString:t.message,adTag:t.tag})}));var a=this.videoId,s="",d=null,l=0;if(window.googleAnalyticsPromise.then((function(){var t={},i={};e.player.on("playlistItem",(function(i){s=i.item.file,d=i.item.duration,i.item.mediaid===a?e.playerStates.completed&&e.sendLiftIgniterEvent(o(o({},i),{},{e:"video_ad_and_video_replay",id:e.adId,videoDuration:d,videoUrl:s,videoId:a,videoIndex:e.auctionCount})):(a=i.item.mediaid,t={})})),e.player.on("firstFrame",(function(){e.player.setControls(!0),window.googleAnalytics.sendEventCustomDimensions("Video","Play",a,void 0,e.analyticsModel),i={},r={}})),e.player.on("time",(function(n){var r=n.position/n.duration*100;[25,50,75,95,100].forEach((function(i){t[i]||r>=i&&(window.googleAnalytics.sendEventCustomDimensions("Video","PlayPercent",a,i,e.analyticsModel),t[i]=!0)}));var u=[15,30];u.forEach((function(t){if(!i[t]){var r=u.indexOf(t)+1;r<=u.length&&n.position>u[r]||n.position>=t&&(1<n.position-l?e.sendLiftIgniterEvent(o(o({},n),{},{e:"video_play_skipped_past_"+t+"s",videoDuration:d,videoUrl:s,videoId:a,videoIndex:e.auctionCount})):e.sendLiftIgniterEvent(o(o({},n),{},{e:"video_play_stuck_"+t+"s",videoDuration:d,videoUrl:s,videoId:a,videoIndex:e.auctionCount})),i[t]=!0)}})),l=n.position}))})),this.analyticsConfig&&this.analyticsConfig.comscore&&this.analyticsConfig.comscore.config&&0<this.analyticsConfig.comscore.config.length){var u=this.analyticsConfig.comscore.config[0],c=this._loadComscoreLibrary();Promise.all([this._consentForAnalytics(),c]).then((function(t){var i;t[0]&&window.ns_&&window.ns_.StreamingAnalytics&&window.ns_.StreamingAnalytics.JWPlayer&&(u.videoTracking&&u.videoTracking.staticReportingValues&&(i=u.videoTracking.staticReportingValues.filter((function(e){return e.value})).map((function(e){return e.key+'="'+e.value.replace(/"/g,"")+'"'})).join(", ")),window.ns_.StreamingAnalytics.JWPlayer(e.player,{publisherId:u.publisherId,labelmapping:i}))}))}this.player.on("viewable",(function(t){e.playerStates.viewable=t.viewable})),this.player.on("levelsChanged",(function(t){e.sendLiftIgniterEvent(o(o({},t),{},{e:"video_quality_level_changed",videoDuration:d,videoUrl:s,videoId:a,videoIndex:e.auctionCount}))})),this.player.on("adPlay",(function(t){e.adId=t.id,e.sendLiftIgniterEvent(o(o({},t),{},{e:e.playerStates.paused?"video_ad_resume":"video_ad_play",id:e.adId})),e.playerStates.paused=!1})),this.player.on("adPause",(function(t){e.playerStates.paused=!0,e.playerStates.viewable||e.sendLiftIgniterEvent(o(o({},t),{},{e:"video_ad_unfloat",id:e.adId})),e.sendLiftIgniterEvent(o(o({},t),{},{e:"video_ad_pause",id:e.adId}))})),this.player.on("adComplete",(function(t){e.sendLiftIgniterEvent(o(o({},t),{},{e:"video_ad_complete",id:e.adId})),e.adId=null})),this.player.on("adSkipped",(function(t){e.sendLiftIgniterEvent(o(o({},t),{},{e:"video_ad_skipped",id:e.adId})),e.adId=null})),this.player.on("adTime",(function(t){var i=[15,30];i.forEach((function(n){if(!r[n]){var a=i.indexOf(n)+1;a<=i.length&&t.position>i[a]||t.position>=n&&(e.sendLiftIgniterEvent(o(o({},t),{},{e:"video_ad_play_stuck_"+n+"s",id:e.adId})),r[n]=!0)}}))})),this.player.on("play",(function(t){(!e.playerStates.playing||e.playerStates.paused)&&(e.adId=null,e.sendLiftIgniterEvent(o(o({},t),{},{e:e.playerStates.paused?"video_resume":"video_play",videoDuration:d,videoUrl:s,videoId:a,videoIndex:e.auctionCount})),e.playerStates.playing=!0,e.playerStates.paused=!1)})),this.player.on("nextClick",(function(t){e.sendLiftIgniterEvent(o(o({},t),{},{e:"video_next_click",videoDuration:d,videoUrl:s,videoId:a,videoIndex:e.auctionCount})),e.playerStates.playing=!1,e.playerStates.paused=!1})),this.player.on("playlist",(function(t){e.sendLiftIgniterEvent(o(o({},t),{},{e:"video_playlist",videoDuration:d,videoUrl:s,videoId:a,videoIndex:e.auctionCount})),e.playerStates.playing=!1,e.playerStates.paused=!1})),this.player.on("pause",(function(t){e.playerStates.paused=!0,e.playerStates.viewable||e.sendLiftIgniterEvent(o(o({},t),{},{e:"video_unfloat",videoDuration:d,videoUrl:s,videoId:a,videoIndex:e.auctionCount})),e.sendLiftIgniterEvent(o(o({},t),{},{e:"video_pause",videoDuration:d,videoUrl:s,videoId:a,videoIndex:e.auctionCount}))})),this.player.on("mute",(function(t){e.adId?e.sendLiftIgniterEvent(o(o({},t),{},{id:e.adId,e:t.mute?"video_ad_mute":"video_ad_unmute"})):e.sendLiftIgniterEvent(o(o({},t),{},{videoDuration:d,videoUrl:s,videoId:a,videoIndex:e.auctionCount,e:t.mute?"video_mute":"video_unmute"}))})),this.player.on("complete",(function(t){e.playerStates.completed=!0,e.sendLiftIgniterEvent(o(o({},t),{},{e:"video_complete",videoDuration:d,videoUrl:s,videoId:a,videoIndex:e.auctionCount})),e.playerStates.playing=!1})),this.player.on("fullscreen",(function(t){e.adId?e.sendLiftIgniterEvent(o(o({},t),{},{e:t.fullscreen?"video_ad_enter_full_screen":"video_ad_exit_full_screen",id:e.adId})):e.sendLiftIgniterEvent(o(o({},t),{},{e:t.fullscreen?"video_enter_full_screen":"video_exit_full_screen",videoDuration:d,videoUrl:s,videoId:a,videoIndex:e.auctionCount}))})),("mobile"===_.get()||"tablet"===_.get())&&this.player.on("autostartNotAllowed",(function(){e.sendLiftIgniterEvent({e:"video_autostart_not_allowed",videoDuration:d,videoUrl:s,videoId:a,videoIndex:e.auctionCount})})),this.player.on("adRequest",(function(t){e.sendLiftIgniterEvent(o(o({},t),{},{e:"video_ad_request_start",videoDuration:d,videoUrl:s,videoId:a,videoIndex:e.auctionCount}))}))}},{key:"_jwplayerStates",value:function(){this.isFloating=this.player.getFloating(),this.isUserInactive=this.playerElement.classList.contains("jw-flag-user-inactive")}},{key:"sendLiftIgniterEvent",value:function(e){if("undefined"!=typeof window&&window.$p&&e){for(var i in e.mediaFile&&(e.mediaFile=e.mediaFile.file),e.universalAdId&&0<e.universalAdId.length&&(e.universalAdIdRegistry=e.universalAdId[0].universalAdIdRegistry,e.universalAdIdValue=e.universalAdId[0].universalAdIdValue),delete e.universalAdId,e.adtitle&&(e.adTitle=e.adtitle,delete e.adtitle),e.placement&&(e.adPlacement=e.placement,delete e.placement),e.adposition&&(e.adPosition=e.adposition,delete e.adposition),delete e.type,e)null!==e[i]&&"object"===t(e[i])&&(e[i]=JSON.stringify(e[i])),"string"==typeof e[i]&&(e[i]=e[i].substring(0,1e3));window.$p("send",e.e,e)}}},{key:"runAuction",value:function(){var e=this;if(!this.auctionPromise){var t=this.adConfig;if(!t||!t.units||this.directOnly)return Promise.resolve();var n=i.util.getCurrentBreakpoint();t.units[n].forEach((function(t){if(!document.getElementById(t.code)){var i=document.createElement("div");i.id=t.code,e.appendChild(i)}})),this.auctionCount++;var o="".concat(this.id,"-").concat(this.auctionCount),r=this;this.auctionPromise=new Promise((function(e,i){window.phxAdAuctionQueue.push((function(){var n=this;this.dynamicAuction(t,o).then((function(){var t=n.getResultById(o);t.then((function(e){e.getMaxBidForAdUnit()>=r.autoplayThreshold&&(r.autoplayThresholdMet=!0)})),t.then(e,i)})).catch((function(){return e()}))}))}))}return this.auctionPromise}},{key:"goToLinkWithOffset",value:function(e){e.preventDefault();var t=e.target.getAttribute("href"),i=this.player.getPosition();0<i&&(t+="#t=".concat(Math.floor(i))),window.googleAnalytics&&window.googleAnalytics.sendEvent("Chained Video View","click",t),window.location.href=t}},{key:"onPlaylistItem",value:function(e){var t=this;return e.mediaid!==this.videoId&&fetch("".concat(this.siteBasePath,"/.api/video-meta-by-platform-ids/").concat(e.mediaid)).then((function(e){return e.json()})).then((function(i){var n=i[e.mediaid]||{},o=function(i){if(i){var o=i.querySelector("a"),r=n.path||null;window.location.pathname===r&&(r=null),r?o.setAttribute("href",r):o.removeAttribute("href"),o.textContent=n.promoTitle||e.title||"",t.listenersAdded||o.addEventListener("click",t.goToLinkWithOffset.bind(t))}};o(t.staticFooterMeta),o(t.floatFooterMeta),t.listenersAdded=!0})).catch((function(e){throw t._reportErrorMessage("Cannot load video metadata: "+e),e})),this.playerConfig.advertising?this.runAuction().then((function(){t.auctionPromise=null;var n=t.adConfig,r=i.util.getCurrentBreakpoint(),s=n&&n.units&&n.units[r];if(!s)return Promise.resolve(e);var d=window.pbjs,l=a(n.midrollBreaks||[]),u=n.slots;e.adschedule=[];var c=n.nonlinear?w({gdprApplicable:t.gdprApplicable}).then((function(t){t&&t.tag?e.adschedule.push({type:"nonlinear",offset:n.nonlinear.offset||5,tag:t.tag}):console.warn("Failed to receive nonlinear tag")})):Promise.resolve(),p=u.map((function(i,r){var a=Math.min(r,4),u=s[a];if(!u||!i)return Promise.resolve();var c,p=i.slotModel.zone;if(!(c=["preroll","postroll"].includes(p)?p.replace("roll",""):l.shift()))return Promise.resolve();var h={adId:u.code,slotModel:i.slotModel,dimensions:t.dimensions,maxDuration:n.maxDuration,gdprApplicable:t.gdprApplicable,directOnly:t.directOnly},f=d?d.getBidResponsesForAdUnitCode(u.code):void 0;return f&&f.bids&&0<f.bids.length?m(h).then((function(t){var i=d.adServers.dfp.buildVideoUrl({adUnit:u,params:t});e.adschedule.push({offset:c,tag:i})})):g(h).then((function(t){e.adschedule.push(o({offset:c},t))}))}));return p.push(c),Promise.all(p).then((function(){return e}))})):Promise.resolve(e)}},{key:"playerConfig",get:function(){var e={playlist:this.playlist,aspectratio:"16:9",width:"100%"};if(this.hasAttribute("floating")&&(e.floating={dismissible:!0}),this.dimensions&&(e.height=this.dimensions.h+"",e.width=this.dimensions.w+""),this.hasAttribute("autoplay")&&!this.demonetized&&this.autoplayThresholdMet&&(e.autostart="viewable",this.hasAttribute("autoplaymuted")&&(e.mute=!0)),this.hasAttribute("autopause")&&(e.autoPause={viewability:!0,pauseAds:!this.hasAttribute("floating")}),this.hasAttribute("play-next")&&this.hasAttribute("recommendations-playlist")){var t=this.getAttribute("recommendations-playlist"),i={displayMode:"none",file:"https://cdn.jwplayer.com/v2/playlists/".concat(t,"?format=mrss&related_media_id=").concat(this.videoId),onclick:"play"},n=this.getAttribute("play-next");"click"===n?i.oncomplete="show":"instant"===n?i.oncomplete="none":(i.oncomplete="autoplay",i.autoplaytimer=parseInt(n,10)),e.related=i}return this.demonetized||"disabled"===this.getAttribute("ad")?(e.advertising=!1,e):(e.advertising={client:"googima",maxRedirects:8,vpaidcontrols:!0,vpaidmode:this.hasAttribute("vpaid")?"enabled":"disabled"},e.autostart&&this.hasAttribute("autoplayadsmuted")&&(e.advertising.autoplayadsmuted=!0),e.controls=!this.hasAttribute("autoplay"),e)}},{key:"isPlayerLoadingBlocked",get:function(){return this.hasAttribute("block-player-loading")}}])&&l(s.prototype,y),b&&l(s,b),r}(i.PhoenixElement);window.customElements.define("phoenix-video",n)}))})()})();
//# sourceMappingURL=video.min.js.map